<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <title>phones</title>
</head>

<body>
    <!--vue-ssr-outlet-->
    <div id="app">
        <template>
            <div align="center">
                <h1>ğŸ“±Phones</h1>
                <p></p>
            </div>
            <el-tabs type="border-card">
                <el-tab-pane label="ç”¨æˆ·ç®¡ç†">ç”¨æˆ·ç®¡ç†</el-tab-pane>
                <el-tab-pane label="é…ç½®ç®¡ç†">é…ç½®ç®¡ç†</el-tab-pane>
                <el-tab-pane label="è§’è‰²ç®¡ç†">è§’è‰²ç®¡ç†</el-tab-pane>
                <el-tab-pane label="å®šæ—¶ä»»åŠ¡è¡¥å¿">å®šæ—¶ä»»åŠ¡è¡¥å¿</el-tab-pane>
                <el-table :data=phoneData style="width: 100%">
                    <!-- <el-table-column prop="id" label="åºå·"> </el-table-column> -->
                    <el-table-column prop="rec" label="æ˜Ÿ" width="40" :filters="[ {text: 'ğŸŒŸ', value: 'ğŸŒŸ'}]"
                        :filter-method="filterHandler">
                    </el-table-column>
                    <el-table-column prop="name" label="åå­—" width="150"> </el-table-column>
                    <el-table-column prop="brand" label="å“ç‰Œ" width="80" :filters=brandFilter
                        :filter-method="filterHandler">
                    </el-table-column>
                    <el-table-column prop="inch" label="å±å¹•" width="50"> </el-table-column>
                    <el-table-column prop="nfc" label="NFC" width="50"> </el-table-column>
                    <el-table-column prop="dualSpeaker" label="åŒæ‰¬" width="50"> </el-table-column>
                    <el-table-column prop="headphonePlug" label="è€³æœºå­”" width="80"> </el-table-column>
                    <el-table-column prop="battery" label="ç”µé‡" width="50"> </el-table-column>
                    <el-table-column prop="charging" label="å……ç”µ" width="60"> </el-table-column>
                    <el-table-column prop="frontCamera" label="å‰æ‘„" width="80"> </el-table-column>
                    <el-table-column prop="rearCamera" label="åæ‘„ä¸ªæ•°" width="80"> </el-table-column>
                    <el-table-column prop="rearMax" label="åæ‘„æœ€é«˜" width="80"> </el-table-column>
                    <el-table-column prop="frontMax" label="å‰æ‘„æœ€é«˜" width="80"> </el-table-column>
                    <el-table-column prop="cpu" label="cpu" width="150" :filters=cpuFilter
                        :filter-method="filterHandler">
                    </el-table-column>
                    <el-table-column prop="cg" label="é€šä¿¡" width="50"> </el-table-column>
                    <el-table-column prop="price" label="ä»·æ ¼" width="100"> </el-table-column>
                    <el-table-column prop="nowPrice" label="ç°åœ¨ä»·æ ¼" width="100"> </el-table-column>
                    <el-table-column prop="desc" type="textarea" label="ä»‹ç»" width="150"> </el-table-column>
                    <el-table-column label="æ“ä½œ">
                        <template slot="header" slot-scope="scope">
                            <el-input v-model="search" size="mini" @change='handleSearch' placeholder="è¾“å…¥å…³é”®å­—æœç´¢" />
                        </template>
                        <template slot-scope="scope">
                            <el-button size="mini" @click="handleEdit(scope.$index, scope.row)">ç¼–è¾‘(æœªå¼€æ”¾)</el-button>
                            <el-button size="mini" type="danger" @click="handleDelete(scope.$index, scope.row)">åˆ é™¤(æœªå¼€æ”¾)
                            </el-button>
                        </template>
                    </el-table-column>

                </el-table>
            </el-tabs>

            <div class="block">
                <el-pagination layout="prev, pager, next" :total="50">
                </el-pagination>
            </div>

        </template>
        <el-divider><i class="el-icon-mobile-phone"></i></el-divider>
        <template>
            <el-backtop target=".page-component__scroll .el-scrollbar__wrap"></el-backtop>
        </template>
    </div>
</body>
<!-- å…ˆå¼•å…¥ Vue -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<!-- å¼•å…¥ç»„ä»¶åº“ -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    new Vue({
        el: '#app',
        data: {
            message: 'Hello Vue!',
            search: '',
            phoneData: [],
            activeIndex: '1',
            activeIndex2: '1',
            brandFilter: [
                { text: 'Xiaomi', value: 'Xiaomi' },
                { text: 'OPPO', value: 'OPPO' },
                { text: 'Meizu', value: 'Meizu' },
                { text: 'Vivo', value: 'Vivo' },
                { text: 'OnePlus', value: 'OnePlus' },
                { text: 'Lenovo', value: 'Lenovo' },
                { text: 'Apple', value: 'Apple' },
                { text: 'Huawei', value: 'Huawei' },
                { text: 'ASUS', value: 'ASUS' },
                { text: 'BlackBerry', value: 'BlackBerry' },
            ],
            cpuFilter: [
                { text: 'Snapdragon', value: 'Snapdragon' },
                { text: 'MTK', value: 'MTK' },
                { text: 'HUAWEI Kirin', value: 'HUAWEI Kirin' },
                { text: 'Samsung Exynos', value: 'Samsung Exynos' },],
        },
        created: function () {
            let that = this;
            axios.get('/phones?limit=100&offset=0').then(function (response) {
                for (const p of response.data) {
                    if (p.rec === 1) p.rec = 'ğŸŒŸ';
                }
                that.phoneData = response.data;
            })
            // axios.get('/brands?limit=30&offset=0').then(function (response) {
            //     that.phoneData = response.data;
            // })
            // axios.get('/cpus?limit=30&offset=0').then(function (response) {
            //     that.phoneData = response.data;
            // })
        },
        mounted: function () {

        },
        methods: {
            handleDelete(index, row) {
                // axios.put('/phones/' + row.id, {
                //     del: 1
                // }).then(response => {
                //     console.log('response==>', response);
                // })
            },
            handleSelect(key, keyPath) {
                console.log(key, keyPath);
            },
            filterHandler(value, row, column) {
                const property = column['property'];
                return row[property] === value;
            },
            updatePhone(value, row, column) {
                const property = column['property'];
                return row[property] === value;
            },
            handleSearch(value) {
                const that = this;
                axios.get('/phones?limit=100&offset=0&search=' + value).then(function (response) {
                    for (const p of response.data) {
                        if (p.rec === 1) p.rec = 'ğŸŒŸ';
                    }
                    that.phoneData = response.data;
                })
            }
        }
    })
</script>

</html>